<!DOCTYPE html>
<html>
  <% bot.users.fetch(bots.botid) %>
  <% bot.users.fetch(bots.owner) %>
  <% let botname = ""; %>
  <% let botavatar = ""; %>
  <% let ownername = ""; %>
  <% let owner = bot.users.cache.get(bots.owner); %>
  <% let owneravatar = ""; %>
  <% let additownername = ""; %>
  <% let additowneravatar = ""; %>
  <% let presence = ""; %>
  <% let thebot = bot.users.cache.get(bots.botid) %>
  <% if(bot.users.cache.get(bots.botid)) { %>
    <% botname = bot.users.cache.get(bots.botid).username %>
   <% botavatar = bot.users.cache.get(bots.botid).displayAvatarURL()  %>
   <% presence = bot.users.cache.get(bots.botid).presence.status %>
   <% }else{ %> 
    <% botavatar = bots.avatar  %>
    <% botname = "Error fetching"  %>
   <% } %>
   <% if(bot.users.cache.get(bots.owner)) { %>
    <% ownername = bot.users.cache.get(bots.owner).username %>
   <% owneravatar = bot.users.cache.get(bots.owner).displayAvatarURL()  %>
   <% }else{ %> 
    <% owneravatar = bots.avatar  %>
    <% ownername = "Error fetching"  %>
   <% } %>
<head>
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <link rel="stylesheet" href="https://www.w3schools.com/w3css/4/w3.css">

  <link rel="shortcut icon" href="https://media.discordapp.net/attachments/630858840585535498/750450513304223885/image0.png" style="border-radius: 80px;" type="image/x-icon">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">

  <script src="https://www.google.com/recaptcha/api.js" async defer></script>

    <meta charset="UTF-8">
    <meta name="og:description" content="<%= bots.short %>" />
    <meta name="og:image" content="<%= botavatar %>" />
    <meta name="og:title" content="<%= botname %> on Paradise Bot List" />
    <meta name="theme-color" content="<%= presence %>" />
    <meta name="keywords" content="discordbots.org , top.gg, Discordbots.co , Bots , bot list , paradisebots.net, discord bot list , discord boats , blaze , lists, discord bots , discord bots list">
    <meta property="og:description" content="<%= bots.short %>" />
    <meta name="og:image" content="<%= botavatar %>" />
    <meta name="theme-color" content="<%= presence %>" />

  <title>Paradise Bot List | <%= botname %></title>
</head>
<body>

  <%- include("../partials/header", { bot, user, path, }) %>
  
    <center>
      <br>
      <% if (alert) { %>
        <div style="background-color: rgb(151, 255, 177);  border: solid; border-color: black; width: 100%; height: 70px; border-radius: 20px; padding: 6px">
          <b style="color: rgb(70, 150, 70);"><%= alert %></b>
        </div>
      <% }else if(error){ %>
        <div style="background-color: rgb(255, 87, 87);  border: solid; border-color: black; width: 100%; height: 70px; border-radius: 20px; padding: 6px">
          <b style="color: white;"><%= error %></b>
        </div>
        <% } %>
        <br>
        <% if(bots){ %>
        <% if(bots.status == "pending"){ %>
          <div style="background-color: rgb(255, 87, 87); border: solid; border-color: black; width: 100%; border-radius: 20px; padding: 6px; animation: fadeIn 0.4s; transition: 0.4s;">
            <b style="color: white;">NOTE: This bots page is private untill it has been approved.</b>
          </div>
        <% } %>
        <% } %>
        <br>
      </center>

      <br><br>

   <div class="container">
    <center>
    <img class="boticon" src="https://cdn.discordapp.com/avatars/<%= thebot.id %>/<%= thebot.avatar %>">
    </center>
  </div>
  <center>
  <div class="container">
  <h1 style="font-size: 60px;"><%= botname %></h1>
  <% if(presence == "online"){ %>
    <svg style="width:70px;height:70px" viewBox="0 0 24 24">
      <path fill="currentColor" style="color: greenyellow; font-size: 20px;" d="M12,8A4,4 0 0,0 8,12A4,4 0 0,0 12,16A4,4 0 0,0 16,12A4,4 0 0,0 12,8Z" />
    </svg>
  <% }else if(presence== "idle"){ %>
    <svg style="width:70px;height:70px" viewBox="0 0 24 24">
      <path fill="currentColor" style="color: rgb(255, 189, 47);" d="M12,8A4,4 0 0,0 8,12A4,4 0 0,0 12,16A4,4 0 0,0 16,12A4,4 0 0,0 12,8Z" />
    </svg>
  <% }else if(presence == "dnd"){ %> 
    <svg style="width:70px;height:70px" viewBox="0 0 24 24">
      <path fill="currentColor" style="color: rgb(255, 47, 47);" d="M12,8A4,4 0 0,0 8,12A4,4 0 0,0 12,16A4,4 0 0,0 16,12A4,4 0 0,0 12,8Z" />
    </svg>
  <% }else{ %> 
    <svg style="width:70px;height:70px" viewBox="0 0 24 24">
      <path fill="currentColor" style="color: rgb(189, 189, 189);" d="M12,8A4,4 0 0,0 8,12A4,4 0 0,0 12,16A4,4 0 0,0 16,12A4,4 0 0,0 12,8Z" />
    </svg>
  <% } %>
  </div>

  <div class="container">
    <form method="POST">
     <% if(user && bots.likes.get(user.id)) { %>
      <button style="cursor: pointer;" value="likes" class="rev_button checked" name="like"><b><%= bots.likes.size %></b> 👍</button>
     <% }else{ %>
      <button style="cursor: pointer;" value="likes" class="rev_button" name="like"><b><%= bots.likes.size %></b> 👍</button>
      <% } %>
     <% if(user && bots.dislikes.get(user.id)) { %>
     <button style="cursor: pointer;" value="dislikes" class="rev_button checked" name="dislike"><b><%= bots.dislikes.size %></b> 👎</button>
     <% }else{ %>
     <button style="cursor: pointer;" value="dislikes" class="rev_button" name="dislike"><b><%= bots.dislikes.size %></b> 👎</button>
      <% } %>
    </form>
   </div>

  <div class="container">
   <% if(isPartneredBot){ %>
      <div class="badge-holder" style="margin-top: 5px; margin-right: 5px;">
       <b style="background-color: rgb(124, 122, 122);  margin: 10px; height: 35px; border-radius: 20px; padding: 5px;"> <img src='https://media.discordapp.net/attachments/747390406722977863/760782195249381406/partner.png' title='Partnered Bot' width="25px" height="25px"/> Partnered Bot</b>
      </div>
   <% } %>
    <br>

   <% if(bots.is_certified ||  isCertifiedBot) { %>
      <div class="badge-holder" style="margin-top: 5px; margin-right: 5px;">
         <b style="background-color: rgb(124, 122, 122);  margin: 10px; height: 35px; border-radius: 20px; padding: 5px;"> <img src='https://media.discordapp.net/attachments/747390406722977863/760792636436250644/cert.png' title='Certified Bot' width="25px" height="25px"/> Certified Bot</b>
      </div>
   <% } %>
  </div>

  <br><br>

  <div class="container">
    <a  href="/bots/<%= bots.is_certified ? bots.vanity : bots.botid %>/vote" class="viewbutton" style="margin-top: 15px; margin-right: 15px;" ><i class="fa fa-level-up"></i> Vote</a>
    <a  href="/bots/<%= bots.is_certified ? bots.vanity : bots.botid %>/report" class="viewbutton" style="margin-top: 15px; margin-right: 15px;" ><i class="fa fa-edit"></i> Report</a>
    <% if(bots.website !== 'https://paradisebots.net/') { %>
    <a  href="<%= bots.website %>" target="_blank" class="viewbutton" style= "margin-top: 15px; margin-right: 15px;"><i class="fa fa-globe"></i> Website</a>
    <% } %>
    <% if(bots.github !== "IE: https://github.com/" || bots.github !== "https://github.com/" || bots.github !== "https://github.com/ParadiseBotList"){ %>
    <a  href="<%= bots.github %>" target="_blank" class="viewbutton" style= "margin-top: 15px; margin-right: 15px;" ><i class="fa fa-github"></i> GitHub</a>
    <% } %>
   <% if (bots.serverlink !== "https://discord.gg/Cqy99Pt") { %>
    <a  href="<%= bots.serverlink %>" target="_blank" class="viewbutton" style= "margin-top: 15px; margin-right: 15px;" ><i class="fa fa-server"></i> Server</a>
    <% } %>
    <a  href="<%= bots.invite %>" target="_blank" class="viewbutton" style="margin-top: 15px; margin-right: 15px;" ><i class="fa fa-plus"></i> Invite</a>
    <a href="/bots/<%= bots.botid %>/widget" target="_blank" class="viewbutton" style= "margin-top: 15px; margin-right: 15px;" ><i class="fa fa-file-image-o"></i> Widget</a>
    <% if (!bots.donate === "https://www.patreon.com/ParadiseBots" || !bots.donate === "https://paypal.me/") { %>
    <a  href="<%= bots.donate %>" target="_blank" class="viewbutton" style="margin-top: 15px; margin-right: 15px;" ><i class="fa fa-credit-card-alt"></i> Donate</a>
    <% } %>
  <% if(user){ %>
    <% if(user.id == bots.owner || user.id == bots.additionalOwners){ %> 
    <a href="/bots/<%= bots.botid %>/edit" class="viewbutton" style="margin-top: 15px; margin-right: 15px;" ><i class="fa fa-pencil"></i> Edit</a>
    <% } %>
    <% } %>
    <% if(user){ %>
    <% if(user.id == bots.owner && bots.votes >= 15) { %> 
    <a href="/certification" class="viewbutton" style="margin-top: 15px; margin-right: 15px;" ><i class="fa fa-certificate"></i> Certify Bot</a>
    <% } %>
  <% } %>
  </div>
  
  <% if(user){ %>
    <% if(user.id == bots.owner || user.id == bots.additionalOwners){ %> 
      <form style="margin-top: 1em;" method="POST"> <!-- method="post" tiggers a POST request to the same url with the body of the form control inputs -->
    <button name="token" value="1hhh" class="button custom" style="width: 200px;"><i class="fa fa-eye"></i> Api Token</button>
    <button name="newtoken" value="1" class="button custom" style="width: 200px;"><i class="fa fa-gear"></i> Generate Api Token</button>
  </form>
  <form style="margin-top: 1em;" method="POST"> <!-- method="post" tiggers a POST request to the same url with the body of the form control inputs -->
  <button name="permdelete" value="1" style="background-color: rgb(255, 62, 62); width: 220px; " class="button custom"><i class="fa fa-trash"></i> Permanent Delete Bot</button>
  </form>
  <% } %>
 <% } %>
<br>
  
<center>

  <hr style="margin-left: 100px; margin-right: 100px;">
 <div class="b-text"><i class="fa fa-code"></i> Developer(s):</div>
  <div class="container">
    <br>
    <img src="https://cdn.discordapp.com/avatars/<%= owner.id %>/<%= owner.avatar %>" style="width: 30px; height: 30px; border-radius: 30px;">
    <b style="margin-top: 15px; margin-left: 15px; margin-right: 15px;"><a href="/users/<%= bots.owner %>"><%= ownername %></a></b>
    <% for(let i of owners) { %>
      <br>
      <img src="https://cdn.discordapp.com/avatars/<%= i.id %>/<%= i.avatar %>" style="width: 30px; height: 30px; border-radius: 30px;">
      <b style="margin-top: 15px; margin-left: 15px; margin-right: 15px;"><a href="/users/<%= i.id %>"><%= i.username %></a></b>
    <% } %>
  </div>

  </center>

  <hr style="margin-left: 100px; margin-right: 100px;">
  <br><br><br>
  </div>

  <div style="margin-right: 100px; margin-left: 100px;">
    <div class="b-text"><i class="fa fa-database"></i> Stats:</div>
    <br>
    <div class="container" style="float: left;">
    <b style="background-color: rgb(124, 122, 122); border-radius: 20px; padding: 5px; margin: 5px;"><i class="fa fa-check"></i> Votes: <%= bots.votes %></b>
    
    <b style="background-color: rgb(124, 122, 122); border-radius: 20px; padding: 5px; margin: 5px;"><i class="fa fa-server"></i> Servers: <%= bots.servers === 0 ? "N/A" : bots.servers %></b>
    
    <b style="background-color: rgb(124, 122, 122); border-radius: 20px; padding: 5px; margin: 5px;"><i class="fa fa-sitemap"></i> Shards: <%= bots.shards === 0 ? "N/A" : bots.shards %></b>
    </div><br><br><br>
    
    <div class="b-text"><i class="fa fa-tags"></i> Tags:</div>
    <br>
    <div class="container" style="float: left;">
    <% bots.tags.split(", ").map(x => { %>
    <b style="background-color: rgb(124, 122, 122); border-radius: 20px; padding: 5px; margin: 5px;"><%= x %></b> 
    <% }) %>
    </div><br><br><br>
    
    <div class="b-text"><i class="fa fa-wrench"></i>  Library:</div>
      <b style="background-color: rgb(124, 122, 122);  border-radius: 20px; padding: 5px;"><%= bots.library %></b>
   </div>
    
    <hr style="margin-left: 100px; margin-right: 100px;">
    <div class="botpage_card">
    <div style="margin-right: 20px; margin-left: 20px;">
    <br>
    <h3 style="color: white;"><%= bots.short %></h3>
    <hr>
    <b style="font-size: 20px; background-color: rgb(124, 122, 122);  border-radius: 20px; padding: 5px;">Prefix: <code style="font-size: 15px"><%= bots.prefix %></code></b>
    <hr>
      <span class="<%= isURL ? '' : 'markdown-body ' %>" style="font-size: 20px;"><%- desc %></span>
    <br>
    </div>
  </div>
    
    <br><br><br>
<%- include("../partials/footer") %>
</body>
</html>
